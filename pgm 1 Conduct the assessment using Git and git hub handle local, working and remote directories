Role Authorisation with login/logout


Login.js

import React, { useState } from "react";
import { Navigate, useNavigate } from "react-router-dom";


const Login = () => {
 const [loginDetails, setLoginDetails] = useState({
   username: "",
   password: "",
 });




 const navigate = useNavigate()




 const handleLogin = () => {


   if(loginDetails.username === 'admin' && loginDetails.password ==='admin')
   {
       sessionStorage.setItem('role','admin')
       navigate('/about')
   }


   else{
       sessionStorage.setItem('role','guest')
       navigate('/home')
   }
 };


 const handleChange = (event) => {
   setLoginDetails({
     ...loginDetails,
     [event.target.name]: event.target.value,
   });
 };
 return (
   <div className="container mt-4">
     <p>
       <label className="form-label">Username</label>
       {/* <input type="text" name='username' onChange={(event)=>setLoginDetails({...loginDetails,username:event.target.value})}/> */}
       <input type="username" name="username" onChange={handleChange} className="form-control" />
     </p>


     <p>
       <label className="form-label">Password</label>
       {/* <input type="password" name="password"  onChange={(event)=>setLoginDetails({...loginDetails,password:event.target.value})} /> */}
       <input type="password" name="password" onChange={handleChange}  className="form-control" />
     </p>


     <p>
       <button onClick={handleLogin} type="button" className="btn btn-sm btn-primary">Login</button>
     </p>
   </div>
 );
};


export default Login;




Menu.js

import React, { useEffect, useState } from "react";
import { Link, Navigate, useLocation, useNavigate } from "react-router-dom";


function Menu() {
 const [role, setRole] = useState();


 const location = useLocation();


 const navigate = useNavigate()


 useEffect(() => {
   let myrole = sessionStorage.getItem("role");
   setRole(myrole);
 }, [location.pathname]);




 const handleLogout=()=>{
     sessionStorage.removeItem('role')
     navigate('/login')


 }




 return (
   <nav className="navbar navbar-expand-lg  bg-success">
     <div className="container-fluid">
       <Link className="navbar-brand text-white" href="#">
         K O E N I G
       </Link>
       <button
         className="navbar-toggler"
         type="button"
         data-bs-toggle="collapse"
         data-bs-target="#navbarNavAltMarkup"
         aria-controls="navbarNavAltMarkup"
         aria-expanded="false"
         aria-label="Toggle navigation"
       >
         <span className="navbar-toggler-icon"></span>
       </button>
       <div className="collapse navbar-collapse" id="navbarNavAltMarkup">
         <div className="navbar-nav">
           {role === "admin" ? (
             <>
               <Link
                 className="nav-link active text-white"
                 aria-current="page"
                 to="/home"
               >
                 Home
               </Link>
               <Link className="nav-link text-white" to="/about">
                 About
               </Link>
               <button className="nav-link text-bg-danger" onClick={handleLogout}>Logout</button>
             </>
           ) : role === "guest" ? (
             <>
               <Link
                 className="nav-link active text-white"
                 aria-current="page"
                 to="/home"
               >
                 Home
               </Link>


               <button className="nav-link text-bg-danger" onClick={handleLogout}>Logout</button>
             </>
           ) : (
             <Link className="nav-link text-white" to="/login">
               Login
             </Link>
           )}
         </div>
       </div>
     </div>
   </nav>
 );
}


export default Menu;








App.js

import { BrowserRouter, Navigate, Route, Routes } from "react-router-dom";
import "./App.css";
import Menu from "./Menu";
import About from "./Pages/About";
import Home from "./Pages/Home";
import Login from "./Pages/Login";
import PageNotFound from "./Pages/PageNotFound";


function App() {
 return (
   <BrowserRouter>
     <Menu/>
     <Routes>
       <Route path="/" element={<Navigate to="/login"/>}/>
       <Route path="/home" element={<Home />} />
       <Route path="/about" element={<About />} />
       <Route path="/login" element={<Login />} />
       <Route path="*" element={<PageNotFound/>}/>
     </Routes>
   </BrowserRouter>
 );
}


export default App;
